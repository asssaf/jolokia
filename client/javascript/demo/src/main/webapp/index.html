<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<script src='scripts/lib/json2.js' type='text/javascript'></script>
<script src='scripts/lib/jolokia-js.js' type='text/javascript'></script>
<script src='scripts/jquery-1.4.2.min.js' type='text/javascript'></script>
<script language="javascript" type="text/javascript" src="scripts/jquery.flot.js"></script>
<script language="javascript" type="text/javascript" src="scripts/jquery.timers-1.2.js"></script>
<script src='scripts/demo.js' type='text/javascript'></script>
<head>
    <title>JolokiaJS Test/Demo</title>
</head>
<script type="text/javascript">
    jQuery(document).ready( setupDemo );
    

</script>
<body>
<h1>JolokiaJS Test/Demo</h1>
<button onclick="loadFirebugLite();jQuery(this).remove();">Load Firebug Lite</button><br/>
<table width="95%" border="1">
<tbody>
<tr>
    <td valign="top">
        Enter a <a href="http://www.jolokia.org/reference/html/protocol.html" target="_new">Jolokia-format request</a>:
        <br/>
        <textarea rows="15" cols="60" id="taREQUEST">
            {
            "type" : "READ",
            "mbean" : "java.lang:type=Memory",
            "attribute" : "HeapMemoryUsage",
            "path" : "used"
          }
        </textarea>
        <br/>Select a request from the following list:<br/>
        <div id="requestListArea" style="font-size:80%"></div>
        <span style="background-color:#e0e0e0;">[Auto-send on click?<input type="checkbox" id="checkboxAutosend"/>]</span>
    </td>
    <td rowspan="2" width="50%" valign="top">
        Select <tt>JolokaJS.Request.post()</tt> implementation:<br/>
        <input type="radio" name="radioSwitchBackend" onclick="switchBackend(JolokiaJS.Request.postImpl.concrete.XMLHttpRequest);" checked='checked'/>XMLHttpRequest
        <input type="radio" name="radioSwitchBackend" onclick="switchBackend(JolokiaJS.Request.postImpl.concrete.jQuery);"/>jQuery
        <!--
        <button onclick="switchBackend(JolokiaJS.Request.postImpl.concrete.XMLHttpRequest);">XMLHttpRequest</button>
        or <button onclick="switchBackend(JolokiaJS.Request.postImpl.concrete.jQuery);">jQuery</button>
        -->
        <br/>
        (Both should behave essentially identically.)<br/>
        <textarea rows="30" cols="60" id="taPostImpl"></textarea>
    </td>
</tr>
<tr>
    <td valign="top">
        Then:
        <input type="button" id="buttonSendRequest" onclick="sendViaRequest();" value="Send via JolokiaJS.Request.post()"/>
        <br/>
        RESPONSE:<br/>

        <textarea rows="15" cols="60" id="taRESPONSE">
        </textarea>
    </td>
</tr>
</tbody></table>
<hr/>
Server memory usage (code by <a href="http://banjo.rbfh.de:11111/graphs/">DaTa</a>):<br/>

<button id="buttonMemory" onclick="setupMemoryCollector(3000);jQuery(this).remove();">Start collecting server-side
memory stats...</button><br/>

<div id="heap" style="width:600px;height:200px;border:1px solid black;"></div>
 <div id="legend"></div>
 Used: <span id="used"></span><br />
 Max: <span id="max"></span><br />
 Committed: <span id="committed"></span><br />
 Init: <span id="init"></span>
<br/>
Response JSON:<br/>
<pre id="memoryResponse" style="border:1px dashed lightgray"></pre> 
</body>
</html>
